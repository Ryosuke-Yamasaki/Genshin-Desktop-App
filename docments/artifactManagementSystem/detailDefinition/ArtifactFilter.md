# ArtifactFilter クラスの詳細設計

## 責務

- 聖遺物一覧のフィルタ条件を保持する

## プロパティ設計

| プロパティ名     | 型                      | 制約                   | 説明                                                 |
| ---------------- | ----------------------- | ---------------------- | ---------------------------------------------------- |
| types            | `Set<ArtifactType>`     | 空可                   | 対象とする部位（空ならすべて対象）                   |
| sets             | `Set<ArtifactSet>`      | 空可                   | 対象とする聖遺物セット（空ならすべて対象）           |
| rarities         | `Set<Integer>`          | 空可、4 または 5       | 対象とするレアリティ                                 |
| mainStats        | `Set<StatProp>`         | 空可                   | 対象とするメインステータス                           |
| includedSubStats | `Set<StatProp>`         | 空可                   | 含まれてほしいサブステータス（少なくとも 1 つ含む）  |
| requiredSubStats | `Set<StatProp>`         | 空可                   | 全て含まれている必要があるサブステータス             |
| subStatValueMin  | `Map<StatProp, Double>` | 空可                   | 特定サブステータスにおける最小値（例：会心率 ≧ 5.0） |
| subStatValueMax  | `Map<StatProp, Double>` | 空可                   | 特定サブステータスにおける最大値（例：HP% ≦ 10.0）   |
| scoreMin         | `Double`                | null 可、0.0 以上      | 会心スコアの下限                                     |
| scoreMax         | `Double`                | null 可、scoreMin 以上 | 会心スコアの上限                                     |

## メソッド設計

- メソッド名、引数、戻り値
- 処理概要（簡易なアルゴリズム、実装フロー）
- 呼び出し元・呼び出し先（関係図があるとベスト）

## データベース設計（物理設計）

- テーブル定義書
  - テーブル名、カラム名、データ型、主キー、外部キー、制約など
- インデックス、ビュー、ストアドプロシージャ（必要があれば）

## 画面部品設計（フロントエンド側）

- 各画面部品の役割・処理（ボタン、入力欄、表示部など）
- イベント処理（クリック、バリデーションなど）
- DOM 構成 or コンポーネント構成（React/Vue などを使う場合）

## ファイル構成

- ファイル名と役割一覧
- ディレクトリ構成（例：MVC やクリーンアーキテクチャの階層）

## インターフェース仕様

- 外部 API・内部 API の詳細仕様（エンドポイント・メソッド・パラメータ・戻り値）
- 非同期処理（例：非同期 API 呼び出し、ジョブ処理）の流れ

## エラーハンドリング詳細

- 発生し得るエラーごとの処理内容（例：再試行、ログ、画面表示）
- 使用する例外クラス、catch 構造

## ログ仕様

- ログ出力内容と形式（ログレベル、フォーマット、出力先）
- トレース ID やユーザー ID の扱い

## セキュリティ対策

- 入力値のサニタイズ、エスケープ
- 権限チェックの実装箇所と方式
- セッション・トークンの管理方法

## ユニットテスト設計（任意）

- テスト対象関数とその想定ケース
- モック/スタブの利用可否
- 境界値、例外系含む

## 備考・未定事項

- 保留中の内容と検討メモ
